{"ast":null,"code":"import { HttpParams } from \"@angular/common/http\";\nimport { firstValueFrom, Subject } from \"rxjs\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nconst BACKEND = \"http://localhost:8080/\";\nexport class BGGService {\n  constructor(http) {\n    this.http = http;\n    this.onSearchResults = new Subject();\n    this.onSearchQuery = new Subject();\n  }\n  searchGameByName(name) {\n    const params = new HttpParams().set(\"name\", name);\n    return firstValueFrom(this.http.get('${BACKEND}/api/games', {\n      params\n    })).then(results => {\n      this.onSearchResults.next(results);\n      return results;\n    });\n  }\n}\nBGGService.ɵfac = function BGGService_Factory(t) {\n  return new (t || BGGService)(i0.ɵɵinject(i1.HttpClient));\n};\nBGGService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: BGGService,\n  factory: BGGService.ɵfac\n});","map":{"version":3,"mappings":"AAAA,SAAqBA,UAAU,QAAQ,sBAAsB;AAE7D,SAASC,cAAc,EAAEC,OAAO,QAAQ,MAAM;;;AAG9C,MAAMC,OAAO,GAAG,wBAAwB;AAGxC,OAAM,MAAOC,UAAU;EAKnBC,YAAoBC,IAAgB;IAAhB,SAAI,GAAJA,IAAI;IAHxB,oBAAe,GAAG,IAAIJ,OAAO,EAAU;IACvC,kBAAa,GAAG,IAAIA,OAAO,EAAU;EAEG;EAExCK,gBAAgB,CAACC,IAAY;IACzB,MAAMC,MAAM,GAAG,IAAIT,UAAU,EAAE,CAACU,GAAG,CAAC,MAAM,EAAEF,IAAI,CAAC;IACjD,OAAOP,cAAc,CACjB,IAAI,CAACK,IAAI,CAACK,GAAG,CAAS,sBAAsB,EAAE;MAACF;IAAM,CAAC,CAAC,CACtD,CAACG,IAAI,CAACC,OAAO,IAAG;MACb,IAAI,CAACC,eAAe,CAACC,IAAI,CAACF,OAAO,CAAC;MAClC,OAAOA,OAAO;IAClB,CAAC,CAAC;EACN;;AAfKT,UAAU;mBAAVA,UAAU;AAAA;AAAVA,UAAU;SAAVA,UAAU;EAAAY,SAAVZ,UAAU;AAAA","names":["HttpParams","firstValueFrom","Subject","BACKEND","BGGService","constructor","http","searchGameByName","name","params","set","get","then","results","onSearchResults","next","factory"],"sourceRoot":"","sources":["/Users/Yimin/csf/day35/day35lesson/src/app/bgg.service.ts"],"sourcesContent":["import { HttpClient, HttpParams } from \"@angular/common/http\";\nimport { Injectable } from \"@angular/core\";\nimport { firstValueFrom, Subject } from \"rxjs\";\nimport { Game } from \"./models\";\n\nconst BACKEND = \"http://localhost:8080/\"\n\n@Injectable()\nexport class BGGService {\n\n    onSearchResults = new Subject<Game[]>()\n    onSearchQuery = new Subject<string>()\n\n    constructor(private http: HttpClient) { }\n\n    searchGameByName(name: string): Promise<Game[]> {\n        const params = new HttpParams().set(\"name\", name)\n        return firstValueFrom(\n            this.http.get<Game[]>('${BACKEND}/api/games', {params})\n            ).then(results => {\n                this.onSearchResults.next(results)\n                return results;\n            })\n        }\n    }\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}